# 第五章 初始化与清理

## 5.1 用构造器确保初始化

​	创建对象时，如果其类具有构造器，Java就会在用户有能力操作对象之前自动调用相应的构造器，从而保证初始化的进行。

​	使用new关键字创建对象时，将会为对象分配存储空间，并调用相应的构造器，确保在操作之前就被合适地初始化了。

​	“每个方法的首字母必须小写”的编码风格不适用于构造器。

​	不接受任何参数的构造器叫默认构造器。

​	如果一个类没有默认构造器，比如，若Tree(int)是Tree类的唯一构造器，则编译器将不允许你使用任何其他方式构造Tree的对象。

​	Java中“初始化”和“创建”是捆绑在一起的，两者不能分离。

​	构造器是一种特殊类型的方法，因为它没有返回值，这与返回值为空（void）明显不同。

## 5.2 方法重载

​	在Java（和C++）中，构造器是强制重载方法名的一个原因，它允许用户用多种形式创建对象。

 ### 5.2.1 区分重载方法

​	每个重载的方法都必须有一个独一无二的参数类型列表。

​	方法名和参数列表唯一确定了一个类中的一个方法。

### 5.2.2 涉及基本类型的重载

​	如果传入的实际参数小于参数所声明的类型，则会被提升至对应的类型。char类型至少会提升至int类型。相反的，如果传入参数的大于所声明的类型，必须显式地进行类型转换，否则编译器会报错。

​	基本类型的大小顺序如下所示：```char<byte<short<int<long<float<double```

### 5.2.3以返回值区分重载方法

​	再不需要返回值调用的时候，是区分不出的，如```f();```

## 5.3默认构造器

​	如果没有构造器，则编译器会自动创建一个无参构造器，为了保证能够创建对象。如果已经有构造器，且全都是有参数的构造器，那么再使用无参构造器会报错。

## 5.4this关键字

​	对象的方法其实都有一个默认的参数，编译器自动将参数本身传递给这个方法。如果想要显式的使用这个对象本身，就需要使用this关键字。**仅在必要的时候使用this关键字**。

### 5.4.1在构造器中调用构造器

​	可以使用this关键字在构造器中调用其他的构造器，调用形式是```this(Type args);```。但是只能放在程序的最开始。

​	不能在一个构造器中重复调用构造器，仅能使用一次这种写法。

​	除了构造器之外，类的其他方法不允许使用构造器。

​	this的另外一种使用场景是写在类的setter中。

### 5.4.1static的含义

​	static方法中不能调用非静态方法，反过来可以。某个角度来说，static方法就是没有this关键字的方法。static没有那么“面向对象”，但是这正是它最主要的使用方式。

